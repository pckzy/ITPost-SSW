{% extends "board_base.html" %}

{% load static %}
{% load custom_filter %}

{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<!-- <div class="rounded-xl p-4 mb-4 bg-white shadow">
    <div class="flex items-center rounded-lg">
        
        <img class="w-15 h-15 rounded-full border-4" src="{{ MEDIA_URL }}profile.png" alt="Profile">
        <div class="ml-3">
            <div class="flex justify-between">
                <div class="text-xl font-medium">{{ user.get_full_name }}</div>
            </div>
            <div class="text-sm text-gray-400 my-1 whitespace-nowrap">
                <span class="text-white bg-red-400 rounded p-0.5 px-1">ประกาศสำคัญ</span>
                <span class="px-1">|</span>
                <span class="text-white bg-blue-600 rounded p-0.5 px-1">IT</span>
                <span class="text-white bg-purple-500 rounded p-0.5 px-1">DSBA</span>
                <span class="text-white bg-orange-400 rounded p-0.5 px-1">AIT</span>
                <span class="text-white bg-green-600 rounded p-0.5 px-1">BIT</span>
            </div>
        </div>
    </div>
    <hr class="mt-3 border-gray-200">
    <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 py-3">ประกาศการเรียนของ กลุ่ม Software, Multimedia และ Network</h2>
    <div class="">
        <p class="text-base">Lorem ipsum dolor sit amet consectetur adipisicing elit. Sunt, inventore beatae cupiditate temporibus explicabo accusamus dolor totam ullam aperiam, ducimus, voluptatem quae. Praesentium, ullam hic sapiente iusto voluptatibus et quod odio nobis, qui eum maxime tempore sequi, excepturi accusantium minus nemo quisquam ipsa? Qui delectus, corrupti earum et consequatur voluptates. Tempora, nihil facere?</p>
    </div>
    <div class="flex gap-6">
        <a href="" target="_blank">
            <i class="fas fa-file-pdf text-3xl text-red-600"></i>
            <span class="ml-2">ประกาศสำคัญ.pdf</span>
        </a>
        <a href="" target="_blank">
            <i class="fas fa-file-pdf text-3xl text-red-600"></i>
            <span class="ml-2">Exercise_01.pdf</span>
        </a>
    </div>
</div> -->

{% for post in posts %}
<div class="rounded-xl p-4 mb-4 bg-white shadow-md">
    <div class="flex items-center rounded-lg">
        <img class="w-16 h-16 rounded-full border-4 border-gray-200 object-cover" src="{{ MEDIA_URL }}profile.png" alt="Profile">
        <div class="ml-3 flex-1">
            <div class="">
                <div class="text-xl font-medium text-gray-800">{{ post.created_by.get_post_name }}</div>
            </div>
            <div class="text-sm text-gray-500 my-1 flex flex-wrap items-center gap-1">
                {% if post.post_type.id == 1 %}
                    <span class="text-white bg-red-500 rounded px-2 py-0.5 text-xs font-medium">{{ post.post_type.name }}</span>
                {% elif post.post_type.id == 2 %}
                    <span class="text-white bg-yellow-500 rounded px-2 py-0.5 text-xs font-medium">{{ post.post_type.name }}</span>
                {% else %}
                    <span class="text-white bg-gray-600 rounded px-2 py-0.5 text-xs font-medium">{{ post.post_type.name }}</span>
                {% endif %}
                    <span class="px-1 text-gray-400">|</span>
                    {% for majors in post.majors.all %}
                    {% if majors.id == 1 %}
                    <span class="text-white bg-blue-600 rounded px-2 py-0.5 text-xs font-medium">IT</span>
                    {% elif majors.id == 2 %}
                    <span class="text-white bg-purple-500 rounded px-2 py-0.5 text-xs font-medium">DSBA</span>
                    {% elif majors.id == 3 %}
                    <span class="text-white bg-orange-500 rounded px-2 py-0.5 text-xs font-medium">AIT</span>
                    {% else %}
                    <span class="text-white bg-green-600 rounded px-2 py-0.5 text-xs font-medium">BIT</span>
                    {% endif %}
                    {% endfor %}
                    <span class="px-1 text-gray-400">|</span>
                    {% for spec in post.specializations.all %}
                    {% if spec.id == 1 %}
                    <span class="text-white bg-blue-600 rounded px-2 py-0.5 text-xs font-medium">Software Engineer</span>
                    {% elif spec.id == 2 %}
                    <span class="text-white bg-purple-500 rounded px-2 py-0.5 text-xs font-medium">Network</span>
                    {% elif spec.id == 3 %}
                    <span class="text-white bg-orange-500 rounded px-2 py-0.5 text-xs font-medium">Multimedia</span>
                    {% elif spec.id == 4 %}
                    <span class="text-white bg-green-600 rounded px-2 py-0.5 text-xs font-medium">Data Analyst</span>
                    {% else %}
                    <span class="text-white bg-amber-900 rounded px-2 py-0.5 text-xs font-medium">Data Engineer</span>
                    {% endif %}
                    {% endfor %}
                <span class="px-1 text-gray-400">|</span>
                <span class="text-gray-500 text-xs">{{ post.last_updated|date:"d M Y H:i" }}</span>
            </div>
        </div>
    </div>
    <hr class="mt-3 border-gray-200">
    <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 py-3 leading-tight">{{ post.title }}</h2>
    <div class="prose max-w-none">
        <p class="text-base text-gray-700 leading-relaxed">{{ post.content|linebreaks }}</p>
    </div>
    <div class="flex flex-wrap gap-3 mt-4">
        {% if post.files.all %}
            {% for file in post.files.all %}
                {% if file.file.name|lower|ends_with:".jpg" or file.file.name|lower|ends_with:".jpeg" or file.file.name|lower|ends_with:".png" or file.file.name|lower|ends_with:".gif" %}
                    <a href="{{ file.file.url }}" target="_blank" class="block">
                        <img src="{{ file.file.url }}" alt="Preview of {{ file.file.name }}" class="max-w-xs h-auto object-cover rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200">
                    </a>
                {% elif file.file.name|lower|ends_with:".pdf" %}
                    <a href="{{ file.file.url }}" target="_blank" class="flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 transition-colors duration-200">
                        <i class="far fa-file-pdf text-2xl text-red-600"></i>
                        <span class="ml-2 text-sm font-medium text-gray-700">{{ file.file.name|remove_prefix:"uploads/" }}</span>
                    </a>
                {% elif file.file.name|lower|ends_with:".docx" %}
                    <a href="{{ file.file.url }}" target="_blank" class="flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 transition-colors duration-200">
                        <i class="far fa-file-word text-2xl text-blue-600"></i>
                        <span class="ml-2 text-sm font-medium text-gray-700">{{ file.file.name|remove_prefix:"uploads/" }}</span>
                    </a>
                {% else %}
                    <a href="{{ file.file.url }}" target="_blank" class="flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 transition-colors duration-200">
                        <i class="far fa-file text-2xl text-gray-600"></i>
                        <span class="ml-2 text-sm font-medium text-gray-700">{{ file.file.name|remove_prefix:"uploads/" }}</span>
                    </a>
                {% endif %}
            {% endfor %}
        {% else %}
        <!-- <p class="text-gray-500">ไม่มีไฟล์แนบ</p> -->
        {% endif %}
    </div>
    <hr class="mt-4 border-gray-200">
    <div class="flex mt-4 gap-6">
        <div class="flex items-center gap-2">
            <a href="" class="hover:text-red-500 transition-colors duration-200">
                <!-- far -> fa-solid text-red-500 -->
                <i class="far fa-heart text-2xl text-gray-600"></i>
            </a>
            <span class="text-sm font-medium text-gray-600">69</span>
        </div>
        <div class="flex items-center gap-2">
            <a href="" class="hover:text-blue-500 transition-colors duration-200">
                <!-- far -> fa-solid text-blue-500 -->
                <i class="far fa-comment text-2xl text-gray-600"></i>
            </a>
            <span class="text-sm font-medium text-gray-600">2</span>
        </div>
    </div>
</div>
{% empty %}
<div class="text-center py-8">
    <p class="text-gray-500 text-lg">ยังไม่มีโพสต์</p>
</div>
{% endfor %}

{% endblock %}
<!-- <span class="px-1">|</span>
<span class="text-white bg-yellow-400 rounded p-0.5 px-1">ปี 1</span>
<span class="text-white bg-blue-800 rounded p-0.5 px-1">ปี 2</span>
<span class="text-white bg-yellow-700 rounded p-0.5 px-1">ปี 3</span>
<span class="text-white bg-amber-950 rounded p-0.5 px-1">ปี 4</span> -->